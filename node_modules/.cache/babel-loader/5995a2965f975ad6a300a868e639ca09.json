{"ast":null,"code":"import _objectSpread from\"/home/fathurrohman/Works/eduvibe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/fathurrohman/Works/eduvibe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useContext,useReducer}from'react';import reducer from'../reducers/filter_reducer';import{useCoursesContext}from'./courses_context';import{jsx as _jsx}from\"react/jsx-runtime\";var defaultState={filtered_courses:[],all_courses:[],searchbycourse:'',filters:{coursesortby:'none',filterbyprice:'no-filter-price',filterbylevel:'all',min_price:0,max_price:0,price:0}};var FilterContext=/*#__PURE__*/React.createContext();export var FilterProvider=function FilterProvider(_ref){var children=_ref.children;var _useCoursesContext=useCoursesContext(),courses=_useCoursesContext.courses;var _useReducer=useReducer(reducer,defaultState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];useEffect(function(){dispatch({type:'LOAD_COURSES',payload:courses});},[courses]);useEffect(function(){dispatch({type:'FILTER_COURSES'});dispatch({type:'SEARCH_COURSES'});},[courses,state.sorting,state.searchbycourse,state.filters]);var updateSort=function updateSort(e){var value=e.target.value;dispatch({type:'UPDATE_SORT',payload:value});};var updateSearch=function updateSearch(e){var name=e.target.name;var value=e.target.value;dispatch({type:'UPDATE_SEARCH',payload:{name:name,value:value}});};var updateFilters=function updateFilters(e){var name=e.target.name;var value=e.target.value;if(name==='price'){value=Number(value);}dispatch({type:'UPDATE_FILTERS',payload:{name:name,value:value}});};var clearFilters=function clearFilters(){dispatch({type:'CLEAR_FILTERS'});};return/*#__PURE__*/_jsx(FilterContext.Provider,{value:_objectSpread(_objectSpread({},state),{},{updateSort:updateSort,updateSearch:updateSearch,updateFilters:updateFilters,clearFilters:clearFilters}),children:children});};export var useFilterContext=function useFilterContext(){return useContext(FilterContext);};","map":{"version":3,"sources":["/home/fathurrohman/Works/eduvibe/src/context/filter_context.js"],"names":["React","useEffect","useContext","useReducer","reducer","useCoursesContext","defaultState","filtered_courses","all_courses","searchbycourse","filters","coursesortby","filterbyprice","filterbylevel","min_price","max_price","price","FilterContext","createContext","FilterProvider","children","courses","state","dispatch","type","payload","sorting","updateSort","e","value","target","updateSearch","name","updateFilters","Number","clearFilters","useFilterContext"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext, useReducer } from 'react';\nimport reducer from '../reducers/filter_reducer';\nimport { useCoursesContext } from './courses_context';\n\nconst defaultState = {\n    filtered_courses: [],\n    all_courses: [],\n    searchbycourse: '',\n    filters: {\n        coursesortby: 'none',\n        filterbyprice: 'no-filter-price',\n        filterbylevel: 'all',\n        min_price: 0,\n        max_price: 0,\n        price: 0\n    }\n}\n\nconst FilterContext = React.createContext();\n\nexport const FilterProvider = ( { children } ) => {\n    const { courses } = useCoursesContext();\n    const [state, dispatch] = useReducer( reducer, defaultState );\n\n    useEffect( () => {\n        dispatch( { type: 'LOAD_COURSES', payload: courses } )\n    }, [courses] )\n\n    useEffect( () => {\n        dispatch( { type: 'FILTER_COURSES' } )\n        dispatch( { type: 'SEARCH_COURSES' } )\n    }, [courses, state.sorting, state.searchbycourse, state.filters] );\n\n    const updateSort = (e) => {\n        const value = e.target.value\n        dispatch({ type: 'UPDATE_SORT', payload: value })\n    }\n\n    const updateSearch = (e) => {\n        let name = e.target.name;\n        const value = e.target.value;\n        dispatch( { type: 'UPDATE_SEARCH', payload: { name, value } } )\n    }\n    const updateFilters = (e) => {\n        let name = e.target.name;\n        let value = e.target.value;\n        if ( name === 'price' ) {\n            value = Number( value )\n        }\n        dispatch( { type: 'UPDATE_FILTERS', payload: { name, value } } )\n    }\n    const clearFilters = () => {\n        dispatch( { type: 'CLEAR_FILTERS' } )\n    }\n    \n    return (\n        <FilterContext.Provider\n            value={{\n                ...state,\n                updateSort,\n                updateSearch,\n                updateFilters,\n                clearFilters\n            }}\n        >\n            {children}\n        </FilterContext.Provider>\n    )\n}\n\nexport const useFilterContext = () => {\n    return useContext( FilterContext )\n}"]},"metadata":{},"sourceType":"module"}